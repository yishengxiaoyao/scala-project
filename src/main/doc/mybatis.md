# mybatis

## mybatis日志模块
将第三方日志文件进行统一:适配器模式
优先加载第三方日志文件:静态代码块 thread.run 同步线程
Log业务增强:动态代理

mybatis打开调试模式后,能打印sql语句，是怎么实现的，使用那种模式:
使用适配器模式进行统一封装,然后使用动态代理模式，实现。
connection 前置增强  后置增强是创建preparestatement。
preparestatement 前置增强  后置增强是 ResultSet。


适配器模式和代理模式的区别


## mybatis数据源模块
简单工厂模式:不符合原则 单一和开闭原则 ，对需求的扩展需要修改代码。

数据源:工厂模式

创建对象的方式:new、反射、工厂类创建


工厂模式:
>* 
>*
>* 
>* 

池化技术: 减少创建对象的次数;对象复用;提高性能


获取链接的过程:
PoolConnection:使用动态代理封装了真正的数据库链接对象
PoolState:用于管理空闲和活跃状态的链接资源


先从PoolState中的空闲链接池中获取链接,


cas 乐观锁 synchronized 悲观锁


## 缓存模块分析
装饰器模式、

Mybatis缓存的实现是基于Map,从缓存里面读写数据是缓存模块的核心基本功能。


缓存和数据库保证数据一致性:为缓存设置有效期。



